this.createjs=this.createjs||{};(function(){ColorMatrix=function(e,c,d,b){this.initialize(e,c,d,b)};var a=ColorMatrix.prototype=[];ColorMatrix.DELTA_INDEX=[0,0.01,0.02,0.04,0.05,0.06,0.07,0.08,0.1,0.11,0.12,0.14,0.15,0.16,0.17,0.18,0.2,0.21,0.22,0.24,0.25,0.27,0.28,0.3,0.32,0.34,0.36,0.38,0.4,0.42,0.44,0.46,0.48,0.5,0.53,0.56,0.59,0.62,0.65,0.68,0.71,0.74,0.77,0.8,0.83,0.86,0.89,0.92,0.95,0.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];ColorMatrix.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1];ColorMatrix.LENGTH=ColorMatrix.IDENTITY_MATRIX.length;a.initialize=function(e,c,d,b){this.reset();this.adjustColor(e,c,d,b);return this};a.reset=function(){return this.copyMatrix(ColorMatrix.IDENTITY_MATRIX)};a.adjustColor=function(e,c,d,b){this.adjustHue(b);this.adjustContrast(c);this.adjustBrightness(e);return this.adjustSaturation(d)};a.adjustBrightness=function(b){if(b==0||isNaN(b)){return this}b=this._cleanValue(b,255);this._multiplyMatrix([1,0,0,0,b,0,1,0,0,b,0,0,1,0,b,0,0,0,1,0,0,0,0,0,1]);return this},a.adjustContrast=function(c){if(c==0||isNaN(c)){return this}c=this._cleanValue(c,100);var b;if(c<0){b=127+c/100*127}else{b=c%1;if(b==0){b=ColorMatrix.DELTA_INDEX[c]}else{b=ColorMatrix.DELTA_INDEX[(c<<0)]*(1-b)+ColorMatrix.DELTA_INDEX[(c<<0)+1]*b}b=b*127+127}this._multiplyMatrix([b/127,0,0,0,0.5*(127-b),0,b/127,0,0,0.5*(127-b),0,0,b/127,0,0.5*(127-b),0,0,0,1,0,0,0,0,0,1]);return this};a.adjustSaturation=function(e){if(e==0||isNaN(e)){return this}e=this._cleanValue(e,100);var b=1+((e>0)?3*e/100:e/100);var d=0.3086;var c=0.6094;var f=0.082;this._multiplyMatrix([d*(1-b)+b,c*(1-b),f*(1-b),0,0,d*(1-b),c*(1-b)+b,f*(1-b),0,0,d*(1-b),c*(1-b),f*(1-b)+b,0,0,0,0,0,1,0,0,0,0,0,1]);return this};a.adjustHue=function(e){if(e==0||isNaN(e)){return this}e=this._cleanValue(e,180)/180*Math.PI;var g=Math.cos(e);var d=Math.sin(e);var c=0.213;var b=0.715;var f=0.072;this._multiplyMatrix([c+g*(1-c)+d*(-c),b+g*(-b)+d*(-b),f+g*(-f)+d*(1-f),0,0,c+g*(-c)+d*(0.143),b+g*(1-b)+d*(0.14),f+g*(-f)+d*(-0.283),0,0,c+g*(-c)+d*(-(1-c)),b+g*(-b)+d*(b),f+g*(1-f)+d*(f),0,0,0,0,0,1,0,0,0,0,0,1]);return this};a.concat=function(b){b=this._fixMatrix(b);if(b.length!=ColorMatrix.LENGTH){return this}this._multiplyMatrix(b);return this};a.clone=function(){return new ColorMatrix(this)};a.toArray=function(){return this.slice(0,ColorMatrix.LENGTH)};a.copyMatrix=function(c){var b=ColorMatrix.LENGTH;for(var d=0;d<b;d++){this[d]=c[d]}return this};a._multiplyMatrix=function(c){var e=[];for(var f=0;f<5;f++){for(var d=0;d<5;d++){e[d]=this[d+f*5]}for(var d=0;d<5;d++){var g=0;for(var b=0;b<5;b++){g+=c[d+b*5]*e[b]}this[d+f*5]=g}}};a._cleanValue=function(c,b){return Math.min(b,Math.max(-b,c))};a._fixMatrix=function(b){if(b instanceof ColorMatrix){b=b.slice(0)}if(b.length<ColorMatrix.LENGTH){b=b.slice(0,b.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(b.length,ColorMatrix.LENGTH))}else{if(b.length>ColorMatrix.LENGTH){b=b.slice(0,ColorMatrix.LENGTH)}}return b};createjs.ColorMatrix=ColorMatrix}());this.createjs=this.createjs||{};(function(){var a=function(c){this.initialize(c)};var b=a.prototype=new createjs.Filter();b.matrix=null;b.initialize=function(c){this.matrix=c};b.applyFilter=function(h,m,k,c,d,j,T,R){j=j||h;if(T==null){T=m}if(R==null){R=k}try{var v=h.getImageData(m,k,c,d)}catch(P){return false}var Q=v.data;var E=Q.length;var p,M,S,U;var f=this.matrix;var O=f[0],N=f[1],L=f[2],K=f[3],H=f[4];var F=f[5],C=f[6],A=f[7],w=f[8],t=f[9];var I=f[10],G=f[11],D=f[12],B=f[13],z=f[14];var u=f[15],s=f[16],q=f[17],o=f[18],n=f[19];for(var J=0;J<E;J+=4){p=Q[J];M=Q[J+1];S=Q[J+2];U=Q[J+3];Q[J]=p*O+M*N+S*L+U*K+H;Q[J+1]=p*F+M*C+S*A+U*w+t;Q[J+2]=p*I+M*G+S*D+U*B+z;Q[J+3]=p*u+M*s+S*q+U*o+n}v.data=Q;j.putImageData(v,T,R);return true};b.toString=function(){return"[ColorMatrixFilter]"};b.clone=function(){return new a(this.matrix)};createjs.ColorMatrixFilter=a}());